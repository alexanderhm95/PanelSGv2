"use strict";(self.webpackChunkPanelSG=self.webpackChunkPanelSG||[]).push([[258],{4258:(ae,h,c)=>{c.r(h),c.d(h,{TestEstudianteModule:()=>le});var g=c(6895),u=c(668),a=c(433);class v{constructor(){this.form=new a.cw({name:new a.NI("",[a.kI.required,a.kI.minLength(3)]),imagen:new a.NI(null),valor:new a.NI("",[a.kI.required,a.kI.minLength(3),a.kI.pattern("^[0-9]*$")]),section:new a.NI("",[a.kI.required,a.kI.minLength(3),a.kI.pattern("^[0-9]*$")])})}}var d=c(2340),e=c(8256),f=c(2126),p=c(529);let _=(()=>{class n{constructor(t){this.http=t,this.URL=d.N.api+"/api/1.0"}createPregunta(t){return this.http.post(`${this.URL}/testImages`,t)}getAllPregunta(){return this.http.get(`${this.URL}/testImages`)}getAllPreguntaPaginated(t,r){const i=(new p.LE).set("page",t.toString()).set("pageSize",r.toString());return this.http.get(`${this.URL}/testImages/paginated`,{params:i})}getPregunta(t){return this.http.get(`${this.URL}/testImages/${t}`)}updatePregunta(t,r){return this.http.put(`${this.URL}/testImages/${t}`,r)}deletePregunta(t){return this.http.delete(`${this.URL}/testImages/${t}`)}deleteAllPregunta(){return this.http.delete(`${this.URL}/testImages`)}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(p.eN))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),b=(()=>{class n{validateImage(t){return!(!t||!["image/png","image/jpeg","image/jpg"].includes(t.type))}renameImage(t,r){const i=t.name.split(".")[0],o=t.name.split(".")[1],s=`${r}_${i.replace(/[^a-zA-Z]/g,"")}.${o}`;return new File([t],s,{type:t.type})}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Z(n,l){1&n&&(e.ynx(0),e._UZ(1,"i",25),e.BQk())}function w(n,l){1&n&&(e.ynx(0),e._UZ(1,"i",26),e.BQk())}function y(n,l){if(1&n&&(e.TgZ(0,"div",23),e.YNc(1,Z,2,0,"ng-container",24),e.YNc(2,w,2,0,"ng-container",24),e.qZA()),2&n){const t=e.oxw();let r,i;e.xp6(1),e.Q6J("ngIf",null==(r=t.formTestImages.form.get("name"))||null==r.errors?null:r.errors.required),e.xp6(1),e.Q6J("ngIf",null==(i=t.formTestImages.form.get("name"))||null==i.errors?null:i.errors.minlength)}}function U(n,l){1&n&&(e.ynx(0),e._UZ(1,"i",27),e.BQk())}function C(n,l){if(1&n&&(e.TgZ(0,"div",23),e.YNc(1,U,2,0,"ng-container",24),e.qZA()),2&n){const t=e.oxw();let r;e.xp6(1),e.Q6J("ngIf",null==(r=t.formTestImages.form.get("imagen"))||null==r.errors?null:r.errors.required)}}function A(n,l){if(1&n&&e._UZ(0,"img",28),2&n){const t=e.oxw();e.Q6J("src",t.imageUrl,e.LSH)}}function q(n,l){1&n&&(e.ynx(0),e._UZ(1,"i",29),e.BQk())}function N(n,l){1&n&&(e.ynx(0),e._UZ(1,"i",26),e.BQk())}function J(n,l){1&n&&(e.ynx(0),e._UZ(1,"i",30),e.BQk())}function Q(n,l){if(1&n&&(e.TgZ(0,"div",23),e.YNc(1,q,2,0,"ng-container",24),e.YNc(2,N,2,0,"ng-container",24),e.YNc(3,J,2,0,"ng-container",24),e.qZA()),2&n){const t=e.oxw();let r,i,o;e.xp6(1),e.Q6J("ngIf",null==(r=t.formTestImages.form.get("valor"))||null==r.errors?null:r.errors.required),e.xp6(1),e.Q6J("ngIf",null==(i=t.formTestImages.form.get("valor"))||null==i.errors?null:i.errors.minlength),e.xp6(1),e.Q6J("ngIf",null==(o=t.formTestImages.form.get("valor"))||null==o.errors?null:o.errors.pattern)}}function k(n,l){1&n&&(e.ynx(0),e._UZ(1,"i",29),e.BQk())}function E(n,l){1&n&&(e.ynx(0),e._UZ(1,"i",26),e.BQk())}function S(n,l){1&n&&(e.ynx(0),e._UZ(1,"i",30),e.BQk())}function Y(n,l){if(1&n&&(e.TgZ(0,"div",23),e.YNc(1,k,2,0,"ng-container",24),e.YNc(2,E,2,0,"ng-container",24),e.YNc(3,S,2,0,"ng-container",24),e.qZA()),2&n){const t=e.oxw();let r,i,o;e.xp6(1),e.Q6J("ngIf",null==(r=t.formTestImages.form.get("section"))||null==r.errors?null:r.errors.required),e.xp6(1),e.Q6J("ngIf",null==(i=t.formTestImages.form.get("section"))||null==i.errors?null:i.errors.minlength),e.xp6(1),e.Q6J("ngIf",null==(o=t.formTestImages.form.get("section"))||null==o.errors?null:o.errors.pattern)}}let F=(()=>{class n{constructor(t,r,i,o,s,m){this.notification=t,this.testService=r,this.imageService=i,this.route=o,this.router=s,this.http=m,this.api=d.N.api+"/api/1.0",this.formTestImages=new v,this.srcImage="",this.imageUrl="",this.id="",this.imageUpload=!1}ngOnInit(){this.formTestImages.form.reset(),this.id=this.route.snapshot.paramMap.get("id"),this.getTest()}getTest(){this.testService.getPregunta(this.id).subscribe(t=>{this.testImages=t,console.log(t),this.setValues(this.testImages)},t=>{console.log(t)})}obtenerImagen(t){return this.http.get(t,{responseType:"blob"})}setValues(t){this.formTestImages.form.patchValue({name:t.name,valor:t.value,section:t.section}),this.loadImage(t.link)}loadImage(t){const r=t.split("/");this.obtenerImagen(this.api+t).subscribe(i=>{const o=new File([i],r[r.length-1],{type:i.type});this.imagenTest=this.imageService.renameImage(o,"TestImagenes"),this.srcImage="/public/TestImagenes/"+this.imagenTest.name,this.imageUpload=!0;const s=new FileReader;s.onload=m=>{this.imageUrl=m.target.result},s.readAsDataURL(o)})}update(){this.testImages={name:this.formTestImages.form.value.name,urlImage:this.srcImage,value:this.formTestImages.form.value.valor,section:this.formTestImages.form.value.section};const t=new FormData;t.append("singleFile",this.imagenTest),t.append("data",JSON.stringify(this.testImages)),this.testService.updatePregunta(this.id,t).subscribe(r=>{const{message:i}=r;this.notification.showSuccess("\xc9xito","pregunta agregada correctamente"),console.log(i),this.router.navigate(["../../listar"],{relativeTo:this.route})},r=>{this.notification.showError("Error",0===r.status?"Error de conexi\xf3n con el servidor, int\xe9ntelo mas tarde":r.error.error)})}onFileSelected(t){const r=t.target.files,i=r.length>0?r[0]:null;if(i&&this.imageService.validateImage(i)){this.imagenTest=this.imageService.renameImage(i,"TestImagenes"),this.srcImage="/public/TestImagenes/"+this.imagenTest.name,this.imageUpload=!0;const o=new FileReader;o.onload=s=>{this.imageUrl=s.target.result},o.readAsDataURL(i)}else this.resetImage()}resetImage(){this.formTestImages.form.get("imagen")?.setValue(null),this.imagenTest=void 0,this.srcImage="",this.imageUpload=!1,this.imageUrl=""}cancel(){this.router.navigate(["../../listar"],{relativeTo:this.route})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(f.T),e.Y36(_),e.Y36(b),e.Y36(u.gz),e.Y36(u.F0),e.Y36(p.eN))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-editar"]],decls:42,vars:7,consts:[[1,"w-[95%]","lg:h-[95%]","m-2","bg-cameo","border-4","border-camelot","rounded-lg","overflow-x-hidden"],[1,"w-full","lg:h-[10%]","text-center","text-2xl","font-bold","text-camelot","py-4","flex","items-center","justify-center"],["enctype","multipart/form-data",1,"w-full","lg:h-[90%]","py-2",3,"formGroup","ngSubmit"],[1,"w-full","flex","flex-col","items-center"],[1,"lg:w-[60%]","w-[80%]","grid","lg:grid-cols-2","mb-4","grid-cols-1"],[1,"w-full","col-span-1","text-camelot","text-lg","mt-2","py-1","text-left"],["for","name"],[1,"w-full","col-span-1","text-nile-blue","text-lg","flex","items-center","justify-center","mt-1"],["type","text","id","name","formControlName","name",1,"w-full","border-2","border-camelot","rounded-lg","focus:ring-camelot-400","focus:border-camelot-400"],["class","text-red-200 text-xl rounded pl-2 flex","role","alert",4,"ngIf"],["for","imagen"],[1,"flex","flex-col","col-span-1"],[1,"w-full","text-nile-blue","text-lg","flex","items-center","justify-center","mt-1"],["type","file","id","imagen","formControlName","imagen","accept","image/*",1,"w-full","border-2","border-camelot","rounded-lg","focus:ring-camelot-400","focus:border-camelot-400",3,"change"],["alt","Imagen seleccionada","class","w-40 h-40",3,"src",4,"ngIf"],["for","value"],["type","number","id","name","formControlName","valor",1,"w-full","border-2","border-camelot","rounded-lg","focus:ring-camelot-400","focus:border-camelot-400"],["for","section"],["type","number","id","name","formControlName","section",1,"w-full","border-2","border-camelot","rounded-lg","focus:ring-camelot-400","focus:border-camelot-400"],[1,"lg:w-[60%]","w-[80%]","grid","grid-cols-1","mb-4"],[1,"w-full","flex","text-camelot","text-lg","mr-2","mb-2","justify-end"],["type","button",1,"border-2","border-camelot","text-lg","text-nile-blue","bg-cameo","rounded-lg","px-2","py-1","hover:bg-nile-blue","hover:text-cameo","mr-2",3,"click"],["type","submit",1,"border-2","border-camelot","text-lg","text-nile-blue","bg-cameo","rounded-lg","px-2","py-1","hover:bg-nile-blue","hover:text-cameo",3,"disabled"],["role","alert",1,"text-red-200","text-xl","rounded","pl-2","flex"],[4,"ngIf"],["title","Nombre requerido",1,"fa","fa-exclamation-circle","animate-bounce","cursor-pointer","px-1"],["title","Longitud minima requerida",1,"fa","fa-exclamation-circle","animate-bounce","cursor-pointer","px-1"],["title","Imagen requerida",1,"fa","fa-exclamation-circle","animate-bounce","cursor-pointer","px-1"],["alt","Imagen seleccionada",1,"w-40","h-40",3,"src"],["title","Valor requerido",1,"fa","fa-exclamation-circle","animate-bounce","cursor-pointer","px-1"],["title","Solo se permiten n\xfameros ",1,"fa","fa-exclamation-circle","animate-bounce","cursor-pointer","px-1"]],template:function(t,r){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1),e._uU(2," Modificar pregunta para el test del estudiante "),e.qZA(),e.TgZ(3,"form",2),e.NdJ("ngSubmit",function(){return r.update()}),e.TgZ(4,"fieldset",3)(5,"div",4)(6,"div",5)(7,"label",6),e._uU(8," Ingrese el nombre de la imagen: "),e.qZA()(),e.TgZ(9,"div",7),e._UZ(10,"input",8),e.YNc(11,y,3,2,"div",9),e.qZA()(),e.TgZ(12,"div",4)(13,"div",5)(14,"label",10),e._uU(15," Cargar imagen: "),e.qZA()(),e.TgZ(16,"div",11)(17,"div",12)(18,"input",13),e.NdJ("change",function(o){return r.onFileSelected(o)}),e.qZA(),e.YNc(19,C,2,1,"div",9),e.qZA(),e.TgZ(20,"div",12),e.YNc(21,A,1,1,"img",14),e.qZA()()(),e.TgZ(22,"div",4)(23,"div",5)(24,"label",15),e._uU(25," Ingrese el valor de la imagen: "),e.qZA()(),e.TgZ(26,"div",7),e._UZ(27,"input",16),e.YNc(28,Q,4,3,"div",9),e.qZA()(),e.TgZ(29,"div",4)(30,"div",5)(31,"label",17),e._uU(32," Ingrese la secci\xf3n ala que pertenece: "),e.qZA()(),e.TgZ(33,"div",7),e._UZ(34,"input",18),e.YNc(35,Y,4,3,"div",9),e.qZA()(),e.TgZ(36,"div",19)(37,"div",20)(38,"button",21),e.NdJ("click",function(){return r.cancel()}),e._uU(39," Cancelar "),e.qZA(),e.TgZ(40,"button",22),e._uU(41," Editar "),e.qZA()()()()()()),2&t){let i,o,s,m;e.xp6(3),e.Q6J("formGroup",r.formTestImages.form),e.xp6(8),e.Q6J("ngIf",(null==(i=r.formTestImages.form.get("name"))?null:i.invalid)&&(null==(i=r.formTestImages.form.get("name"))?null:i.touched)),e.xp6(8),e.Q6J("ngIf",(null==(o=r.formTestImages.form.get("imagen"))?null:o.invalid)&&(null==(o=r.formTestImages.form.get("imagen"))?null:o.touched)),e.xp6(2),e.Q6J("ngIf",r.imageUrl),e.xp6(7),e.Q6J("ngIf",(null==(s=r.formTestImages.form.get("valor"))?null:s.invalid)&&(null==(s=r.formTestImages.form.get("valor"))?null:s.touched)),e.xp6(7),e.Q6J("ngIf",(null==(m=r.formTestImages.form.get("section"))?null:m.invalid)&&(null==(m=r.formTestImages.form.get("section"))?null:m.touched)),e.xp6(5),e.Q6J("disabled",r.formTestImages.form.invalid||!r.imageUpload)}},dependencies:[g.O5,a._Y,a.Fj,a.wV,a.JJ,a.JL,a.sg,a.u],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;width:100%;height:100%;align-items:center;justify-content:center}"]}),n})();var T=c(6561);function L(n,l){1&n&&(e.TgZ(0,"div",2),e._UZ(1,"div",3),e.TgZ(2,"div",4)(3,"div",5),e._UZ(4,"div",6),e.TgZ(5,"div",7)(6,"span",8),e._uU(7,"Cargando"),e.qZA(),e.TgZ(8,"span",9),e._uU(9,"..."),e.qZA()()()()())}function R(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"tr",29)(1,"td",30),e._uU(2),e.qZA(),e.TgZ(3,"td",31),e._UZ(4,"img",32),e.qZA(),e.TgZ(5,"td",30),e._uU(6),e.qZA(),e.TgZ(7,"td",30),e._uU(8),e.qZA(),e.TgZ(9,"td",33)(10,"button",34),e._UZ(11,"i",35),e.qZA(),e.TgZ(12,"button",36),e.NdJ("click",function(){const o=e.CHM(t).$implicit,s=e.oxw(2);return e.KtG(s.delete(o._id))}),e._UZ(13,"i",37),e.qZA()()()}if(2&n){const t=l.$implicit,r=e.oxw(2);e.xp6(2),e.hij(" ",t.name," "),e.xp6(2),e.Udp("height",60,"px")("width",80,"px"),e.Q6J("src",r.api+t.link,e.LSH),e.xp6(2),e.hij(" ",t.value," "),e.xp6(2),e.hij(" ",t.section," "),e.xp6(2),e.Q6J("routerLink","../editar/"+t._id)}}function P(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"div",38)(1,"div",39)(2,"div",40),e._uU(3,"Nombre:"),e.qZA(),e.TgZ(4,"div",41),e._uU(5),e.qZA()(),e.TgZ(6,"div",39)(7,"div",40),e._uU(8,"Link:"),e.qZA(),e.TgZ(9,"div",41),e._UZ(10,"img",32),e.qZA()(),e.TgZ(11,"div",39)(12,"div",40),e._uU(13,"Valor:"),e.qZA(),e.TgZ(14,"div",41),e._uU(15),e.qZA()(),e.TgZ(16,"div",39)(17,"div",40),e._uU(18," Secci\xf3n: "),e.qZA(),e.TgZ(19,"div",41),e._uU(20),e.qZA()(),e.TgZ(21,"div",42)(22,"button",43),e._uU(23," Editar "),e.qZA(),e.TgZ(24,"button",44),e.NdJ("click",function(){const o=e.CHM(t).$implicit,s=e.oxw(2);return e.KtG(s.delete(o._id))}),e._uU(25," Eliminar "),e.qZA()()()}if(2&n){const t=l.$implicit,r=e.oxw(2);e.xp6(5),e.hij(" ",t.name," "),e.xp6(5),e.Udp("height",60,"px")("width",80,"px"),e.Q6J("src",r.api+t.link,e.LSH),e.xp6(5),e.hij(" ",t.value," "),e.xp6(5),e.hij(" ",t.section," "),e.xp6(2),e.Q6J("routerLink","../editar/"+t._id)}}function j(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"div",10)(1,"div",11),e._uU(2," Gesti\xf3n del test estudiante "),e.qZA(),e.TgZ(3,"div",12)(4,"div",13)(5,"input",14),e.NdJ("ngModelChange",function(i){e.CHM(t);const o=e.oxw();return e.KtG(o.search=i)}),e.qZA(),e.TgZ(6,"button",15),e._uU(7," Registrar Imagen "),e.qZA()(),e.TgZ(8,"div",16)(9,"table",17)(10,"thead",18)(11,"tr")(12,"th",19),e._uU(13," Nombre "),e.qZA(),e.TgZ(14,"th",19),e._uU(15," Imagen "),e.qZA(),e.TgZ(16,"th",19),e._uU(17," Valor "),e.qZA(),e.TgZ(18,"th",19),e._uU(19," Secci\xf3n "),e.qZA(),e.TgZ(20,"th",19)(21,"div",20)(22,"label",4),e._uU(23,"Acciones"),e.qZA()()()()(),e.TgZ(24,"tbody"),e.YNc(25,R,14,9,"tr",21),e.ALo(26,"filterTables"),e.qZA()(),e.TgZ(27,"div",22)(28,"div",23)(29,"button",24),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.previousPage())}),e._uU(30," Previous "),e.qZA(),e.TgZ(31,"span",25),e._uU(32),e.qZA(),e.TgZ(33,"button",26),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.nextPage())}),e._uU(34," Next "),e.qZA()()()(),e.TgZ(35,"div",27),e.YNc(36,P,26,9,"div",28),e.ALo(37,"filterTables"),e.qZA()()()}if(2&n){const t=e.oxw();e.xp6(5),e.Q6J("ngModel",t.search),e.xp6(1),e.Q6J("routerLink","../registrar"),e.xp6(19),e.Q6J("ngForOf",e.xi3(26,7,t.preguntas,t.search)),e.xp6(4),e.Q6J("disabled",1===t.currentPage),e.xp6(3),e.AsE("Page ",t.currentPage," of ",t.totalPages,""),e.xp6(4),e.Q6J("ngForOf",e.xi3(37,10,t.preguntas,t.search))}}let I=(()=>{class n{constructor(t,r){this.preguntaService=t,this.notification=r,this.api=d.N.api+"/api/1.0",this.search="",this.loading=!0,this.currentPage=0,this.pageSize=0,this.totalPages=0,this.preguntas=[]}ngOnInit(){this.getData()}nextPage(){this.currentPage++,this.getData()}previousPage(){this.currentPage>1&&(this.currentPage--,this.getData())}getData(){this.loading=!0,this.preguntaService.getAllPreguntaPaginated(this.currentPage,this.pageSize).subscribe(t=>{const{message:r,data:i}=t;this.preguntas=i.testImages.docs,this.currentPage=i.testImages.page,this.totalPages=i.testImages.totalPages,this.loading=!1,console.log(r),console.log(t)})}delete(t){this.notification.showConfirm("warning","Peligro","Estas seguro de eliminar la pregunta?","Si, eliminar!","No, cancelar!").then(r=>{r.isConfirmed&&this.preguntaService.deletePregunta(t).subscribe(i=>{const{message:o}=i;this.notification.showSuccess("\xc9xito","Pregunta eliminada correctamente"),console.log(o),this.ngOnInit()},i=>{console.log(i),this.ngOnInit(),this.notification.showError("Error","No se pudo eliminar la pregunta")})})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(_),e.Y36(f.T))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-listar"]],features:[e._Bn([T.u,g.Zd,(0,g.Fs)(d.N.api+"/api/1.0")])],decls:2,vars:2,consts:[["class","fixed inset-0 flex items-center justify-center z-50",4,"ngIf"],["class","transition ease-in-out delay-150 w-[95%] h-[90%] lg:h-[95%] lg:m-2 mx-4 my-2 bg-cameo border-4 border-camelot rounded-lg overflow-x-hidden duration-300",4,"ngIf"],[1,"fixed","inset-0","flex","items-center","justify-center","z-50"],[1,"fixed","inset-0","bg-black","opacity-50"],[1,"flex","items-center","justify-center"],[1,"flex","flex-col","items-center"],[1,"animate-spin","rounded-full","h-20","w-20","border-t-4","border-b-4","border-primary"],[1,"flex","items-center","mt-2"],[1,"text-xl","font-bold","mr-1"],[1,"text-xl","animate-bounce"],[1,"transition","ease-in-out","delay-150","w-[95%]","h-[90%]","lg:h-[95%]","lg:m-2","mx-4","my-2","bg-cameo","border-4","border-camelot","rounded-lg","overflow-x-hidden","duration-300"],[1,"grid","grid-cols-1","mx-4","text-center","text-3xl","font-bold","text-camelot","py-2"],[1,"grid","grid-cols-1","mx-4"],[1,"flex"],["placeholder","Buscar por nombre, secci\xf3n...",1,"px-2","mx-3","py-3","border-b-2","border-camelot","rounded-lg","bg-none","text-camelot","text-xs","font-semibold","tracking-wide","focus:outline-none","focus:border-camelot-400",3,"ngModel","ngModelChange"],["type","button",1,"px-2","py-2","bg-nile-blue","text-cameo","text-xs","font-bold","uppercase","rounded","shadow","hover:shadow-lg","outline-none","focus:outline-none","mr-1","mb-1","ease-linear","transition-all","duration-150",3,"routerLink"],[1,"w-full","lg:h-auto","px-4","py-2","rounded-lg","shadow","hidden","lg:block"],[1,"w-full","lg:h-[85%]","my-2"],[1,"bg-nile-blue-200","border-b-2","border-nile-blue","text-cameo"],[1,"p-3","text-sm","font-semibold","tracking-wide","text-center"],[1,"flex","justify-between"],["class","bg-nile-blue-100 border-b border-nile-blue-200 text-camelot",4,"ngFor","ngForOf"],[1,"flex","items-center","justify-center","w-full"],[1,"w-[50%]","flex","items-center","justify-between","mt-4"],[1,"px-4","py-2","text-sm","font-medium","text-camelot","border-2","border-camelot","bg-blue-500","rounded","hover:bg-blue-600",3,"disabled","click"],[1,"text-black-400","font-bold"],[1,"px-4","py-2","text-sm","font-medium","text-camelot","border-2","border-camelot","bg-blue-500","rounded","hover:bg-blue-600",3,"click"],[1,"w-full","lg:h-auto","px-4","py-2","rounded-lg","lg:hidden"],["class","w-full flex flex-col mb-2 border border-camelot rounded-lg hover:shadow-sm hover:shadow-camelot-300",4,"ngFor","ngForOf"],[1,"bg-nile-blue-100","border-b","border-nile-blue-200","text-camelot"],[1,"p-3","text-sm","text-black-100","tracking-wide","text-center"],[1,"p-3","text-sm","text-black-100","tracking-wide","flex","items-center","justify-center"],["loading","lazy",3,"src"],[1,"p-3","text-sm","text-black-100","tracking-wide","text-center","flex","flex-row","items-center","justify-center"],["type","button","title","Editar pregunta",3,"routerLink"],[1,"fa-solid","fa-pen-to-square","text-3xl","text-nile-blue-200","hover:text-camelot-400"],["type","button","title","Eliminar pregunta",1,"px-2",3,"click"],[1,"fa","fa-trash","text-3xl","text-red-500","font-bold","hover:text-nile-blue"],[1,"w-full","flex","flex-col","mb-2","border","border-camelot","rounded-lg","hover:shadow-sm","hover:shadow-camelot-300"],[1,"w-full","grid","grid-cols-5","break-all","items-left","space-x-2","text","pl-2","py-2","pr-2"],[1,"col-span-2","break-all","font-bold","text-camelot"],[1,"col-span-3","break-all","text-nile-blue"],[1,"flex","flex-row","gap-2","justify-end","my-2"],["type","button",1,"border-2","border-camelot","text-sm","text-nile-blue","bg-cameo","rounded-lg","px-2","py-1","mr-2",3,"routerLink"],["type","button",1,"border-2","border-camelot","text-sm","text-nile-blue","bg-cameo","rounded-lg","px-2","py-1","mr-2",3,"click"]],template:function(t,r){1&t&&(e.YNc(0,L,10,0,"div",0),e.YNc(1,j,38,13,"div",1)),2&t&&(e.Q6J("ngIf",r.loading),e.xp6(1),e.Q6J("ngIf",!r.loading))},dependencies:[g.sg,g.O5,u.rH,a.Fj,a.JJ,a.On,T.u],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;width:100%;height:100%;align-items:center;justify-content:center}"]}),n})();function M(n,l){1&n&&(e.ynx(0),e._UZ(1,"i",25),e.BQk())}function B(n,l){1&n&&(e.ynx(0),e._UZ(1,"i",26),e.BQk())}function $(n,l){if(1&n&&(e.TgZ(0,"div",23),e.YNc(1,M,2,0,"ng-container",24),e.YNc(2,B,2,0,"ng-container",24),e.qZA()),2&n){const t=e.oxw();let r,i;e.xp6(1),e.Q6J("ngIf",null==(r=t.formTestImages.form.get("name"))||null==r.errors?null:r.errors.required),e.xp6(1),e.Q6J("ngIf",null==(i=t.formTestImages.form.get("name"))||null==i.errors?null:i.errors.minlength)}}function O(n,l){1&n&&(e.ynx(0),e._UZ(1,"i",27),e.BQk())}function V(n,l){if(1&n&&(e.TgZ(0,"div",23),e.YNc(1,O,2,0,"ng-container",24),e.qZA()),2&n){const t=e.oxw();let r;e.xp6(1),e.Q6J("ngIf",null==(r=t.formTestImages.form.get("imagen"))||null==r.errors?null:r.errors.required)}}function z(n,l){if(1&n&&e._UZ(0,"img",28),2&n){const t=e.oxw();e.Q6J("src",t.imageUrl,e.LSH)}}function D(n,l){1&n&&(e.ynx(0),e._UZ(1,"i",29),e.BQk())}function G(n,l){1&n&&(e.ynx(0),e._UZ(1,"i",26),e.BQk())}function H(n,l){1&n&&(e.ynx(0),e._UZ(1,"i",30),e.BQk())}function K(n,l){if(1&n&&(e.TgZ(0,"div",23),e.YNc(1,D,2,0,"ng-container",24),e.YNc(2,G,2,0,"ng-container",24),e.YNc(3,H,2,0,"ng-container",24),e.qZA()),2&n){const t=e.oxw();let r,i,o;e.xp6(1),e.Q6J("ngIf",null==(r=t.formTestImages.form.get("valor"))||null==r.errors?null:r.errors.required),e.xp6(1),e.Q6J("ngIf",null==(i=t.formTestImages.form.get("valor"))||null==i.errors?null:i.errors.minlength),e.xp6(1),e.Q6J("ngIf",null==(o=t.formTestImages.form.get("valor"))||null==o.errors?null:o.errors.pattern)}}function X(n,l){1&n&&(e.ynx(0),e._UZ(1,"i",29),e.BQk())}function W(n,l){1&n&&(e.ynx(0),e._UZ(1,"i",26),e.BQk())}function ee(n,l){1&n&&(e.ynx(0),e._UZ(1,"i",30),e.BQk())}function te(n,l){if(1&n&&(e.TgZ(0,"div",23),e.YNc(1,X,2,0,"ng-container",24),e.YNc(2,W,2,0,"ng-container",24),e.YNc(3,ee,2,0,"ng-container",24),e.qZA()),2&n){const t=e.oxw();let r,i,o;e.xp6(1),e.Q6J("ngIf",null==(r=t.formTestImages.form.get("section"))||null==r.errors?null:r.errors.required),e.xp6(1),e.Q6J("ngIf",null==(i=t.formTestImages.form.get("section"))||null==i.errors?null:i.errors.minlength),e.xp6(1),e.Q6J("ngIf",null==(o=t.formTestImages.form.get("section"))||null==o.errors?null:o.errors.pattern)}}let ne=(()=>{class n{constructor(t,r,i,o,s){this.notification=t,this.testService=r,this.imageService=i,this.router=o,this.route=s,this.formTestImages=new v,this.srcImage="",this.imageUrl=""}ngOnInit(){this.formTestImages.form.reset()}create(){console.log(this.srcImage),this.testImages={name:this.formTestImages.form.value.name,urlImage:this.srcImage,value:this.formTestImages.form.value.valor,section:this.formTestImages.form.value.section};const t=new FormData;t.append("singleFile",this.imagenTest),t.append("data",JSON.stringify(this.testImages)),this.testService.createPregunta(t).subscribe(r=>{const{message:i}=r;this.notification.showSuccess("\xc9xito","pregunta agregada correctamente"),console.log(i),this.router.navigate(["../listar"],{relativeTo:this.route})},r=>{this.notification.showError("Error",0===r.status?"Error de conexi\xf3n con el servidor, int\xe9ntelo mas tarde":r.error.error)})}onFileSelected(t){const r=t.target.files[0];if(!this.imageService.validateImage(r))return this.formTestImages.form.patchValue({imagen:""}),this.imagenTest=void 0,void(this.imageUrl="");{this.imagenTest=this.imageService.renameImage(r,"TestImagenes"),this.srcImage="/public/TestImagenes/"+this.imagenTest.name,console.log("Nueva ruta: ",this.srcImage," Archivo",this.imagenTest);const i=new FileReader;i.onload=o=>{this.imageUrl=o.target.result},i.readAsDataURL(r)}}cancel(){this.router.navigate(["../listar"],{relativeTo:this.route})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(f.T),e.Y36(_),e.Y36(b),e.Y36(u.F0),e.Y36(u.gz))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-registrar"]],decls:42,vars:7,consts:[[1,"w-[95%]","lg:h-[95%]","m-2","bg-cameo","border-4","border-camelot","rounded-lg","overflow-x-hidden"],[1,"w-full","lg:h-[10%]","text-center","text-3xl","font-bold","text-camelot","py-4","flex","items-center","justify-center"],[1,"w-full","lg:h-[90%]","py-2",3,"formGroup","ngSubmit"],[1,"w-full","flex","flex-col","items-center"],[1,"lg:w-[60%]","w-[80%]","grid","lg:grid-cols-2","mb-4","grid-cols-1"],[1,"w-full","col-span-1","text-camelot","text-lg","mt-2","py-1","text-left"],["for","name"],[1,"w-full","col-span-1","text-nile-blue","text-lg","flex","items-center","justify-center","mt-1"],["type","text","id","name","formControlName","name",1,"w-full","border-2","border-camelot","rounded-lg","focus:ring-camelot-400","focus:border-camelot-400"],["class","text-red-200 text-xl rounded pl-2 flex","role","alert",4,"ngIf"],["for","imagen"],[1,"flex","flex-col","col-span-1"],[1,"w-full","text-nile-blue","text-lg","flex","items-center","justify-center","mt-1"],["type","file","id","imagen","formControlName","imagen","accept","image/*",1,"w-full","border-2","border-camelot","rounded-lg","focus:ring-camelot-400","focus:border-camelot-400",3,"change"],["alt","Imagen seleccionada","class","w-40 h-40",3,"src",4,"ngIf"],["for","value"],["type","number","id","name","formControlName","valor",1,"w-full","border-2","border-camelot","rounded-lg","focus:ring-camelot-400","focus:border-camelot-400"],["for","section"],["type","number","id","name","formControlName","section",1,"w-full","border-2","border-camelot","rounded-lg","focus:ring-camelot-400","focus:border-camelot-400"],[1,"lg:w-[60%]","w-[80%]","grid","grid-cols-1","mb-4"],[1,"w-full","flex","text-camelot","text-lg","mr-2","mb-2","justify-end"],["type","button",1,"border-2","border-camelot","text-lg","text-nile-blue","bg-cameo","rounded-lg","px-2","py-1","hover:bg-nile-blue","hover:text-cameo","mr-2",3,"click"],["type","submit",1,"border-2","border-camelot","text-lg","text-nile-blue","bg-cameo","rounded-lg","px-2","py-1","hover:bg-nile-blue","hover:text-cameo",3,"disabled"],["role","alert",1,"text-red-200","text-xl","rounded","pl-2","flex"],[4,"ngIf"],["title","Nombre requerido",1,"fa","fa-exclamation-circle","animate-bounce","cursor-pointer","px-1"],["title","Longitud minima requerida",1,"fa","fa-exclamation-circle","animate-bounce","cursor-pointer","px-1"],["title","Imagen requerida",1,"fa","fa-exclamation-circle","animate-bounce","cursor-pointer","px-1"],["alt","Imagen seleccionada",1,"w-40","h-40",3,"src"],["title","Valor requerido",1,"fa","fa-exclamation-circle","animate-bounce","cursor-pointer","px-1"],["title","Solo se permiten n\xfameros ",1,"fa","fa-exclamation-circle","animate-bounce","cursor-pointer","px-1"]],template:function(t,r){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1),e._uU(2," Registro de preguntas del test de estudiante "),e.qZA(),e.TgZ(3,"form",2),e.NdJ("ngSubmit",function(){return r.create()}),e.TgZ(4,"fieldset",3)(5,"div",4)(6,"div",5)(7,"label",6),e._uU(8," Ingrese el nombre de la imagen: "),e.qZA()(),e.TgZ(9,"div",7),e._UZ(10,"input",8),e.YNc(11,$,3,2,"div",9),e.qZA()(),e.TgZ(12,"div",4)(13,"div",5)(14,"label",10),e._uU(15," Cargar imagen: "),e.qZA()(),e.TgZ(16,"div",11)(17,"div",12)(18,"input",13),e.NdJ("change",function(o){return r.onFileSelected(o)}),e.qZA(),e.YNc(19,V,2,1,"div",9),e.qZA(),e.TgZ(20,"div",12),e.YNc(21,z,1,1,"img",14),e.qZA()()(),e.TgZ(22,"div",4)(23,"div",5)(24,"label",15),e._uU(25," Ingrese el valor de la imagen: "),e.qZA()(),e.TgZ(26,"div",7),e._UZ(27,"input",16),e.YNc(28,K,4,3,"div",9),e.qZA()(),e.TgZ(29,"div",4)(30,"div",5)(31,"label",17),e._uU(32," Ingrese la secci\xf3n ala que pertenece: "),e.qZA()(),e.TgZ(33,"div",7),e._UZ(34,"input",18),e.YNc(35,te,4,3,"div",9),e.qZA()(),e.TgZ(36,"div",19)(37,"div",20)(38,"button",21),e.NdJ("click",function(){return r.cancel()}),e._uU(39," Cancelar "),e.qZA(),e.TgZ(40,"button",22),e._uU(41," Registrar "),e.qZA()()()()()()),2&t){let i,o,s,m;e.xp6(3),e.Q6J("formGroup",r.formTestImages.form),e.xp6(8),e.Q6J("ngIf",(null==(i=r.formTestImages.form.get("name"))?null:i.invalid)&&(null==(i=r.formTestImages.form.get("name"))?null:i.touched)),e.xp6(8),e.Q6J("ngIf",(null==(o=r.formTestImages.form.get("imagen"))?null:o.invalid)&&(null==(o=r.formTestImages.form.get("imagen"))?null:o.touched)),e.xp6(2),e.Q6J("ngIf",r.imageUrl),e.xp6(7),e.Q6J("ngIf",(null==(s=r.formTestImages.form.get("valor"))?null:s.invalid)&&(null==(s=r.formTestImages.form.get("valor"))?null:s.touched)),e.xp6(7),e.Q6J("ngIf",(null==(m=r.formTestImages.form.get("section"))?null:m.invalid)&&(null==(m=r.formTestImages.form.get("section"))?null:m.touched)),e.xp6(5),e.Q6J("disabled",r.formTestImages.form.invalid)}},dependencies:[g.O5,a._Y,a.Fj,a.wV,a.JJ,a.JL,a.sg,a.u],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;width:100%;height:100%;align-items:center;justify-content:center}"]}),n})();var x=c(7574);const re=[{path:"",component:I,pathMatch:"full",title:"Test Estudiante"},{path:"listar",component:I,canActivate:[x.a],data:{requiredRole:"ADMIN"},title:"Test Estudiante"},{path:"registrar",component:ne,canActivate:[x.a],data:{requiredRole:"ADMIN"},title:"Test Estudiante"},{path:"editar/:id",component:F,canActivate:[x.a],data:{requiredRole:"ADMIN"},title:"Test Estudiante"}];let ie=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[u.Bz.forChild(re),u.Bz]}),n})();var oe=c(4466);let le=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[g.ez,ie,a.UX,a.u5,oe.m]}),n})()}}]);
"use strict";(self.webpackChunkPanelSG=self.webpackChunkPanelSG||[]).push([[919],{8919:(F,x,r)=>{r.r(x),r.d(x,{CasoTestEstudianteModule:()=>k});var l=r(6895),m=r(668),g=r(5861),f=r(6561),p=r(7579),u=r(2722),t=r(8256),h=r(5246),v=r(2126),b=r(1045),c=r(433);function _(i,a){1&i&&(t.TgZ(0,"div",3),t._UZ(1,"div",4),t.TgZ(2,"div",3)(3,"div",5),t._UZ(4,"div",6),t.TgZ(5,"div",7)(6,"span",8),t._uU(7,"Cargando"),t.qZA(),t.TgZ(8,"span",9),t._uU(9,"..."),t.qZA()()()()())}function Z(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"tr")(1,"td",26)(2,"div",27)(3,"span")(4,"strong"),t._uU(5,"CI:"),t.qZA(),t._uU(6),t.qZA(),t.TgZ(7,"span")(8,"strong"),t._uU(9,"Nombres:"),t.qZA(),t._uU(10),t.qZA()()(),t.TgZ(11,"td",26)(12,"div",27)(13,"span")(14,"strong"),t._uU(15,"CI:"),t.qZA(),t._uU(16),t.qZA(),t.TgZ(17,"span")(18,"strong"),t._uU(19,"Nombres:"),t.qZA(),t._uU(20),t.qZA()()(),t.TgZ(21,"td",28)(22,"div",29)(23,"div",30)(24,"div",31)(25,"label",32),t._uU(26),t.qZA()()(),t.TgZ(27,"div",33)(28,"div",31)(29,"button",34),t.NdJ("click",function(){const s=t.CHM(e).$implicit,d=t.oxw(3);return t.KtG(d.scoreUpdate(s.id,"plus"))}),t._UZ(30,"i",35),t.qZA(),t.TgZ(31,"button",36),t.NdJ("click",function(){const s=t.CHM(e).$implicit,d=t.oxw(3);return t.KtG(d.scoreUpdate(s.id,"less"))}),t._UZ(32,"i",37),t.qZA()()()()(),t.TgZ(33,"td",38),t._uU(34),t.qZA(),t.TgZ(35,"td",38),t._uU(36),t.ALo(37,"date"),t.qZA(),t.TgZ(38,"td",38)(39,"button",39),t.NdJ("click",function(){const s=t.CHM(e).$implicit,d=t.oxw(3);return t.KtG(d.deleteTest(s.id))}),t._UZ(40,"i",40),t.qZA()()()}if(2&i){const e=a.$implicit;t.xp6(6),t.hij(" ",e.ciDece,""),t.xp6(4),t.AsE(" ",e.nameDece," ",e.lastNameDece,""),t.xp6(6),t.hij(" ",e.ciStudent,""),t.xp6(4),t.AsE(" ",e.nameStudent," ",e.lastNameStudent,""),t.xp6(6),t.hij(" ",e.score," "),t.xp6(3),t.s9C("name",e.id),t.Q6J("ngClass",e.id)("disabled",e.scoreEvaluator>=1),t.xp6(2),t.Q6J("disabled",e.scoreEvaluator<=0),t.xp6(3),t.hij(" ",e.scoreEvaluator," "),t.xp6(2),t.hij(" ",t.xi3(37,13,e.createAt,"dd/MM/yyyy")," ")}}function T(i,a){if(1&i&&(t.TgZ(0,"tbody"),t.YNc(1,Z,41,16,"tr",25),t.ALo(2,"filterTables"),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",t.xi3(2,1,e.tests,e.search))}}function A(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"div",41)(1,"div",42),t._uU(2," DECE Evaluador "),t.qZA(),t.TgZ(3,"div",43)(4,"div",44),t._uU(5,"CI:"),t.qZA(),t.TgZ(6,"div",45),t._uU(7),t.qZA()(),t.TgZ(8,"div",43)(9,"div",44),t._uU(10,"Nombre:"),t.qZA(),t.TgZ(11,"div",45),t._uU(12),t.qZA()(),t.TgZ(13,"div",42),t._uU(14," Estudiante "),t.qZA(),t.TgZ(15,"div",43)(16,"div",44),t._uU(17,"CI:"),t.qZA(),t.TgZ(18,"div",45),t._uU(19),t.qZA()(),t.TgZ(20,"div",43)(21,"div",44),t._uU(22,"Nombre:"),t.qZA(),t.TgZ(23,"div",45),t._uU(24),t.qZA()(),t.TgZ(25,"div",43)(26,"div",44),t._uU(27,"Estado:"),t.qZA(),t.TgZ(28,"div",45),t._uU(29),t.qZA()(),t.TgZ(30,"div",43)(31,"div",44),t._uU(32,"Punt\xfaa:"),t.qZA(),t.TgZ(33,"div",45)(34,"div",29)(35,"div",46)(36,"div",31)(37,"label",32),t._uU(38),t.qZA()()(),t.TgZ(39,"div",33)(40,"div",31)(41,"button",34),t.NdJ("click",function(){const s=t.CHM(e).$implicit,d=t.oxw(2);return t.KtG(d.scoreUpdate(s.id,"plus"))}),t._UZ(42,"i",35),t.qZA(),t.TgZ(43,"button",36),t.NdJ("click",function(){const s=t.CHM(e).$implicit,d=t.oxw(2);return t.KtG(d.scoreUpdate(s.id,"less"))}),t._UZ(44,"i",37),t.qZA()()()()()(),t.TgZ(45,"div",43)(46,"div",44),t._uU(47," Fecha de Aplicaci\xf3n: "),t.qZA(),t.TgZ(48,"div",45),t._uU(49),t.ALo(50,"date"),t.qZA()(),t.TgZ(51,"div",47)(52,"button",48),t.NdJ("click",function(){const s=t.CHM(e).$implicit,d=t.oxw(2);return t.KtG(d.deleteTest(s.id))}),t._uU(53," Eliminar "),t.qZA()()()}if(2&i){const e=a.$implicit;t.xp6(7),t.hij(" ",e.ciDece," "),t.xp6(5),t.AsE(" ",e.nameDece," ",e.lastNameDece," "),t.xp6(7),t.hij(" ",e.ciStudent," "),t.xp6(5),t.AsE(" ",e.nameStudent," ",e.lastNameStudent," "),t.xp6(5),t.hij(" ",e.statusTestStudent," "),t.xp6(9),t.hij(" ",e.score," "),t.xp6(3),t.s9C("name",e.id),t.Q6J("ngClass",e.id)("disabled",e.scoreEvaluator>=1),t.xp6(2),t.Q6J("disabled",e.scoreEvaluator<=0),t.xp6(6),t.hij(" ",t.xi3(50,13,e.createAt,"dd/MM/yyyy")," ")}}function C(i,a){1&i&&(t.TgZ(0,"div",49),t._uU(1," No hay datos para mostrar "),t.qZA())}function y(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"div",10)(1,"div",11),t._uU(2," Gesti\xf3n de test estudiantes "),t.qZA(),t.TgZ(3,"div",12)(4,"div",13)(5,"input",14),t.NdJ("ngModelChange",function(n){t.CHM(e);const s=t.oxw();return t.KtG(s.search=n)}),t.qZA()()(),t.TgZ(6,"div",15)(7,"table",16)(8,"thead",17)(9,"tr")(10,"th",18),t._uU(11," Evaluador "),t.qZA(),t.TgZ(12,"th",18),t._uU(13," Estudiante "),t.qZA(),t.TgZ(14,"th",18),t._uU(15," Puntuaci\xf3n "),t.qZA(),t.TgZ(16,"th",18),t._uU(17," Puntuaci\xf3n Evaluador "),t.qZA(),t.TgZ(18,"th",18),t._uU(19," Fecha de Aplicaci\xf3n "),t.qZA(),t.TgZ(20,"th",19)(21,"div",20)(22,"label",3),t._uU(23,"Acciones"),t.qZA()()()()(),t.YNc(24,T,3,4,"tbody",21),t.qZA()(),t.TgZ(25,"div",22),t.YNc(26,A,54,16,"div",23),t.ALo(27,"filterTables"),t.qZA(),t.YNc(28,C,2,0,"div",24),t.qZA()}if(2&i){const e=t.oxw();t.xp6(5),t.Q6J("ngModel",e.search),t.xp6(19),t.Q6J("ngIf",e.tests.length>0),t.xp6(2),t.Q6J("ngForOf",t.xi3(27,4,e.tests,e.search)),t.xp6(2),t.Q6J("ngIf",0===e.tests.length)}}const w=[{path:"listar",component:(()=>{class i{constructor(e,o,n){this.serviceCasoEstudiante=e,this.notification=o,this.authService=n,this.tests=[],this.search="",this.loading=!0,this.unsubscribe$=new p.x}ngOnInit(){this.loadData()}ngOnDestroy(){this.unsubscribe$.next(),this.unsubscribe$.complete()}loadData(){this.id=this.authService.getUserId(),this.fetchAllTests(this.id)}fetchAllTests(e){this.serviceCasoEstudiante.getAll(e).pipe((0,u.R)(this.unsubscribe$)).subscribe(o=>this.handleFetchSuccess(o),o=>this.handleFetchError(o))}handleFetchSuccess(e){this.loading=!1,this.ngOnInit()}handleFetchError(e){this.loading=!1,this.notification.showError("Error",e.error.error),this.ngOnInit()}scoreUpdate(e,o){this.updateScore(e,"plus"===o?{scoreEvaluator:!0}:{score:!1})}updateScore(e,o){this.serviceCasoEstudiante.updateScore(e,o).pipe((0,u.R)(this.unsubscribe$)).subscribe(n=>this.handleUpdateSuccess(n),n=>this.handleUpdateError(n))}handleUpdateSuccess(e){this.notification.showSuccess("Actualizado","Punto del observador actualizado"),this.ngOnInit()}handleUpdateError(e){this.loading=!1,this.notification.showError("Error",0===e.status?"Error de conexi\xf3n con el servidor":e.error.error),this.ngOnInit()}deleteTest(e){var o=this;return(0,g.Z)(function*(){const n=yield o.notification.showObservationPrompt("\xbfEst\xe1s seguro de querer eliminar el Test?","Por favor, introduce una raz\xf3n u observaci\xf3n:");o.validateRemarks(n)&&o.serviceCasoEstudiante.delete(e,{remarks:n}).pipe((0,u.R)(o.unsubscribe$)).subscribe(s=>o.handleDeleteTestSuccess(s),s=>o.handleDeleteTestError(s))})()}validateRemarks(e){return!(null===e||e.length<10)||(this.notification.showError("Observaci\xf3n inv\xe1lida","Debe introducir una observaci\xf3n de m\xednimo 10 caracteres."),!1)}handleDeleteTestSuccess(e){this.notification.showSuccess("Eliminado","Test eliminado correctamente"),this.ngOnInit()}handleDeleteTestError(e){this.loading=!1,this.notification.showError("Error",0===e.status?"Error de conexi\xf3n con el servidor":e.error.error),this.ngOnInit()}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(h.C),t.Y36(v.T),t.Y36(b.e))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-listar"]],features:[t._Bn([l.uU,f.u])],decls:3,vars:2,consts:[[1,"transition","ease-in-out","delay-150","w-[95%]","h-[90%]","lg:h-[95%]","lg:m-2","mx-4","my-2","bg-cameo","border-4","border-camelot","rounded-lg","overflow-x-hidden","duration-300","flex","justify-center"],["class","flex items-center justify-center",4,"ngIf"],["class","w-full",4,"ngIf"],[1,"flex","items-center","justify-center"],[1,"fixed","inset-0","bg-black","opacity-50"],[1,"flex","flex-col","items-center"],[1,"animate-spin","fast-spin","rounded-full","h-20","w-20","border-t-4","border-b-4","border-primary"],[1,"flex","items-center","mt-2"],[1,"text-xl","font-bold","mr-1"],[1,"text-xl","animate-bounce"],[1,"w-full"],[1,"grid","grid-cols-1","mx-4","text-center","text-3xl","font-bold","text-camelot","my-5"],[1,"grid","grid-cols-1","mx-4"],[1,"flex"],["placeholder","Buscar por c\xe9dula, nombre...",1,"mx-3","px-2","py-3","border-b-2","border-camelot","rounded-lg","bg-none","text-camelot","text-xs","font-semibold","tracking-wide","lg:w-[20%]","focus:outline-none","focus:border-camelot-400",3,"ngModel","ngModelChange"],[1,"w-full","lg:h-auto","px-4","py-2","rounded-lg","shadow","hidden","lg:block"],[1,"w-full","lg:h-[92%]","my-2"],[1,"bg-nile-blue-200","border-b-2","border-nile-blue","text-cameo"],[1,"p-3","text-base","font-semibold","tracking-wide","text-center"],[1,"p-3","text-sm","font-semibold","tracking-wide","text-center"],[1,"flex","justify-between"],[4,"ngIf"],[1,"w-full","lg:h-auto","px-4","py-2","rounded-lg","lg:hidden"],["class","w-full h-full flex flex-col mb-2 border border-camelot rounded-lg hover:shadow-sm hover:shadow-camelot-300",4,"ngFor","ngForOf"],["class","mx-4 flex bg-red-700 text-red text-xl rounded-lg font-bold items-center justify-center py-2 text-center",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"p-3","text-base","text-black-100","tracking-wide","text-left"],[1,"flex","flex-col"],[1,"py-3","text-base","text-black-100","tracking-wide","justify-center","items-center"],[1,"grid","grid-cols-2","m-2"],[1,"col-span-1","text-xl","text-camelot","border-r-2","border-camelot","justify-center","items-center","d-flex","align-items-center"],[1,"d-flex","flex-column","justify-content-center","align-items-center","px-2"],[1,"flex","items-center","justify-end","px-2"],[1,"col-span-1","border-l-2","border-camelot","justify-center","items-center","d-flex","align-items-center"],["type","button",1,"cursor-pointer",3,"ngClass","name","disabled","click"],[1,"fa","fa-plus","text-xl","text-camelot","font-extrabold","border-2","border-camelot","mx-1","rounded-md"],["type","button",1,"cursor-pointer",3,"disabled","click"],[1,"fa","fa-minus","text-xl","text-camelot","font-extrabold","border-2","border-camelot","mx-1","rounded-md"],[1,"p-3","text-base","text-black-100","tracking-wide","text-center"],[1,"bg-red-500","hover:bg-red-700","text-white","font-bold","py-2","px-4","rounded-full",3,"click"],[1,"fas","fa-trash-alt"],[1,"w-full","h-full","flex","flex-col","mb-2","border","border-camelot","rounded-lg","hover:shadow-sm","hover:shadow-camelot-300"],[1,"w-full","grid","grid-cols-1","break-all","items-center","space-x-2","text-center","text-camelot","text-base","px-2","font-bold","underline"],[1,"w-full","grid","grid-cols-5","break-all","items-left","space-x-2","text","pl-2","py-2","pr-2"],[1,"col-span-2","break-all","font-bold","text-camelot"],[1,"col-span-3","break-all","text-nile-blue"],[1,"col-span-1","text-xl","text-camelot","border-r-2","border-camelot","justify-start","items-start","d-flex","align-items-start"],[1,"flex","flex-row","gap-2","justify-end","my-2"],[1,"border-2","border-camelot","text-sm","text-nile-blue","bg-cameo","rounded-lg","px-2","py-1","mr-2",3,"click"],[1,"mx-4","flex","bg-red-700","text-red","text-xl","rounded-lg","font-bold","items-center","justify-center","py-2","text-center"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t.YNc(1,_,10,0,"div",1),t.YNc(2,y,29,7,"div",2),t.qZA()),2&e&&(t.xp6(1),t.Q6J("ngIf",o.loading),t.xp6(1),t.Q6J("ngIf",!o.loading))},dependencies:[l.mk,l.sg,l.O5,c.Fj,c.JJ,c.On,l.uU,f.u],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;width:100%;height:100%;align-items:center;justify-content:center}.fast-spin[_ngcontent-%COMP%]{animation-duration:.4s}"]}),i})(),canActivate:[r(7574).a],data:{requiredRole:"DECE"},title:"Casos"}];let q=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[m.Bz.forChild(w),m.Bz]}),i})();var j=r(4466);let k=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[l.ez,q,c.u5,j.m]}),i})()}}]);
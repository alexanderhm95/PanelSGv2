"use strict";(self.webpackChunkPanelSG=self.webpackChunkPanelSG||[]).push([[923],{923:(S,u,i)=>{i.r(u),i.d(u,{CasoTestDocenteModule:()=>M});var a=i(6895),h=i(668),g=i(5861),f=i(6561),m=i(2722),x=i(7579),e=i(8256),p=i(2340),v=i(529);let T=(()=>{class n{constructor(t){this.http=t,this.URL=p.N.api+"/api/1.0"}create(t){return this.http.post(`${this.URL}/testTeacher`,t)}getAll(t){return this.http.get(`${this.URL}/testTeacher/teacher/${t}`)}getTestTeacher(t){return this.http.get(`${this.URL}/testTeacher/${t}`)}update(t,o){return this.http.put(`${this.URL}/testTeacher/${t}`,o)}delete(t,o){return this.http.delete(`${this.URL}/testTeacher/${t}`,{body:o})}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(v.eN))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var Z=i(1045),b=i(2126),c=i(433);function A(n,s){1&n&&(e.TgZ(0,"div",3),e._UZ(1,"div",4),e.TgZ(2,"div",3)(3,"div",5),e._UZ(4,"div",6),e.TgZ(5,"div",7)(6,"span",8),e._uU(7,"Cargando"),e.qZA(),e.TgZ(8,"span",9),e._uU(9,"..."),e.qZA()()()()())}function y(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"tr")(1,"td",25)(2,"div",26)(3,"span")(4,"strong"),e._uU(5,"CI: "),e.qZA(),e._uU(6),e.qZA(),e.TgZ(7,"span")(8,"strong"),e._uU(9,"Nombres: "),e.qZA(),e._uU(10),e.qZA()()(),e.TgZ(11,"td",25)(12,"div",26)(13,"span")(14,"strong"),e._uU(15,"CI: "),e.qZA(),e._uU(16),e.qZA(),e.TgZ(17,"span")(18,"strong"),e._uU(19,"Nombres: "),e.qZA(),e._uU(20),e.qZA()()(),e.TgZ(21,"td",27),e._uU(22),e.qZA(),e.TgZ(23,"td",27),e._uU(24),e.ALo(25,"date"),e.qZA(),e.TgZ(26,"td",27)(27,"button",28),e.NdJ("click",function(){const l=e.CHM(t).$implicit,d=e.oxw(3);return e.KtG(d.deleteTest(l.id))}),e._UZ(28,"i",29),e.qZA()()()}if(2&n){const t=s.$implicit;e.xp6(6),e.hij(" ",t.ciTeacher,""),e.xp6(4),e.AsE(" ",t.nameTeacher," ",t.lastNameTeacher,""),e.xp6(6),e.hij(" ",t.ciStudent,""),e.xp6(4),e.AsE(" ",t.nameStudent," ",t.lastNameStudent,""),e.xp6(2),e.hij(" ",t.score," "),e.xp6(2),e.hij(" ",e.xi3(25,8,t.createAt,"dd/MM/yyyy")," ")}}function U(n,s){if(1&n&&(e.TgZ(0,"tbody"),e.YNc(1,y,29,11,"tr",24),e.ALo(2,"filterTables"),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",e.xi3(2,1,t.tests,t.search))}}function _(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div",30)(1,"div",31),e._uU(2," Evaluador "),e.qZA(),e.TgZ(3,"div",32)(4,"div",33),e._uU(5,"CI:"),e.qZA(),e.TgZ(6,"div",34),e._uU(7),e.qZA()(),e.TgZ(8,"div",32)(9,"div",33),e._uU(10,"Nombre:"),e.qZA(),e.TgZ(11,"div",34),e._uU(12),e.qZA()(),e.TgZ(13,"div",31),e._uU(14," Estudiante "),e.qZA(),e.TgZ(15,"div",32)(16,"div",33),e._uU(17,"CI:"),e.qZA(),e.TgZ(18,"div",34),e._uU(19),e.qZA()(),e.TgZ(20,"div",32)(21,"div",33),e._uU(22,"Nombre:"),e.qZA(),e.TgZ(23,"div",34),e._uU(24),e.qZA()(),e.TgZ(25,"div",32)(26,"div",33),e._uU(27,"Estado:"),e.qZA(),e.TgZ(28,"div",34),e._uU(29),e.qZA()(),e.TgZ(30,"div",32)(31,"div",33),e._uU(32,"Puntuaci\xf3n:"),e.qZA(),e.TgZ(33,"div",34),e._uU(34),e.qZA()(),e.TgZ(35,"div",32)(36,"div",33),e._uU(37," Fecha de Aplicaci\xf3n: "),e.qZA(),e.TgZ(38,"div",34),e._uU(39),e.ALo(40,"date"),e.qZA()(),e.TgZ(41,"div",35)(42,"button",36),e.NdJ("click",function(){const l=e.CHM(t).$implicit,d=e.oxw(2);return e.KtG(d.deleteTest(l.id))}),e._uU(43," Eliminar "),e.qZA()()()}if(2&n){const t=s.$implicit;e.xp6(7),e.hij(" ",t.ciTeacher," "),e.xp6(5),e.AsE(" ",t.nameTeacher," ",t.lastNameTeacher," "),e.xp6(7),e.hij(" ",t.ciStudent," "),e.xp6(5),e.AsE(" ",t.nameStudent," ",t.lastNameStudent," "),e.xp6(5),e.hij(" ",t.statusTestTeacher," "),e.xp6(5),e.hij(" ",t.score," "),e.xp6(5),e.hij(" ",e.xi3(40,9,t.createAt,"dd/MM/yyyy")," ")}}function C(n,s){1&n&&(e.TgZ(0,"div",37),e._uU(1," No hay datos para mostrar "),e.qZA())}function q(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div",10)(1,"div",11),e._uU(2," Gesti\xf3n de test docentes "),e.qZA(),e.TgZ(3,"div",12)(4,"div",13)(5,"input",14),e.NdJ("ngModelChange",function(r){e.CHM(t);const l=e.oxw();return e.KtG(l.search=r)}),e.qZA()()(),e.TgZ(6,"div",15)(7,"table",16)(8,"thead",17)(9,"tr")(10,"th",18),e._uU(11," Docente Evaluador "),e.qZA(),e.TgZ(12,"th",18),e._uU(13," Estudiante "),e.qZA(),e.TgZ(14,"th",18),e._uU(15," Puntuaci\xf3n "),e.qZA(),e.TgZ(16,"th",18),e._uU(17," Fecha de Aplicaci\xf3n "),e.qZA(),e.TgZ(18,"th",18)(19,"div",19)(20,"label",3),e._uU(21,"Acciones"),e.qZA()()()()(),e.YNc(22,U,3,4,"tbody",20),e.qZA()(),e.TgZ(23,"div",21),e.YNc(24,_,44,12,"div",22),e.ALo(25,"filterTables"),e.qZA(),e.YNc(26,C,2,0,"div",23),e.qZA()}if(2&n){const t=e.oxw();e.xp6(5),e.Q6J("ngModel",t.search),e.xp6(17),e.Q6J("ngIf",t.tests.length>0),e.xp6(2),e.Q6J("ngForOf",e.xi3(25,4,t.tests,t.search)),e.xp6(2),e.Q6J("ngIf",0===t.tests.length)}}const E=[{path:"listar",component:(()=>{class n{constructor(t,o,r){this.serviceCasoTeacher=t,this.authService=o,this.notification=r,this.tests=[],this.search="",this.loading=!0,this.unsubscribe$=new x.x}ngOnInit(){this.loadTests()}ngOnDestroy(){this.unsubscribe$.next(),this.unsubscribe$.complete()}loadTests(){var t=this;return(0,g.Z)(function*(){t.id=t.authService.getUserId();try{const o=yield t.serviceCasoTeacher.getAll(t.id).toPromise();t.handleLoadTestsSuccess(o)}catch(o){t.handleError(o)}})()}handleLoadTestsSuccess(t){this.tests=t.data,this.loading=!1}deleteTest(t){var o=this;return(0,g.Z)(function*(){const r=yield o.notification.showObservationPrompt("\xbfEst\xe1s seguro de querer eliminar el Test?","Por favor, introduce una raz\xf3n u observaci\xf3n:");o.validateAndDeleteTest(t,r)})()}validateAndDeleteTest(t,o){null!==o?o.length<10?this.notification.showError("Observaci\xf3n inv\xe1lida","Debe introducir una observaci\xf3n de m\xednimo 10 caracteres."):this.executeDeleteTest(t,o):this.notification.showError("Acci\xf3n cancelada","La acci\xf3n ha sido cancelada por el usuario.")}executeDeleteTest(t,o){this.serviceCasoTeacher.delete(t,{remarks:o}).pipe((0,m.R)(this.unsubscribe$)).subscribe(()=>this.handleDeleteSuccess(),r=>this.handleError(r))}handleDeleteSuccess(){this.notification.showSuccess("Eliminado","Test eliminado correctamente"),this.loadTests()}handleError(t){this.loading=!1,this.notification.showError("Error",0===t.status?"Error de conexi\xf3n con el servidor":t.error.error)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(T),e.Y36(Z.e),e.Y36(b.T))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-listar"]],features:[e._Bn([a.uU,f.u])],decls:3,vars:2,consts:[[1,"transition","ease-in-out","delay-150","w-[95%]","h-[90%]","lg:h-[95%]","lg:m-2","mx-4","my-2","bg-cameo","border-4","border-camelot","rounded-lg","overflow-x-hidden","duration-300","flex","justify-center"],["class","flex items-center justify-center",4,"ngIf"],["class","w-full",4,"ngIf"],[1,"flex","items-center","justify-center"],[1,"fixed","inset-0","bg-black","opacity-50"],[1,"flex","flex-col","items-center"],[1,"animate-spin","fast-spin","rounded-full","h-20","w-20","border-t-4","border-b-4","border-primary"],[1,"flex","items-center","mt-2"],[1,"text-xl","font-bold","mr-1"],[1,"text-xl","animate-bounce"],[1,"w-full"],[1,"grid","grid-cols-1","mx-4","text-center","text-3xl","font-bold","text-camelot","my-5"],[1,"grid","grid-cols-1","mx-4"],[1,"flex"],["placeholder","Buscar por c\xe9dula, nombre...",1,"mx-3","px-2","py-3","border-b-2","border-camelot","rounded-lg","bg-none","text-camelot","text-xs","font-semibold","tracking-wide","lg:w-[20%]","focus:outline-none","focus:border-camelot-400",3,"ngModel","ngModelChange"],[1,"w-full","lg:h-auto","px-4","py-2","rounded-lg","shadow","hidden","lg:block"],[1,"w-full","lg:h-[92%]","my-2"],[1,"bg-nile-blue-200","border-b-2","border-nile-blue","text-cameo"],[1,"p-3","text-sm","font-semibold","tracking-wide","text-center"],[1,"flex","justify-between"],[4,"ngIf"],[1,"w-full","lg:h-auto","px-4","py-2","rounded-lg","lg:hidden"],["class","w-full h-full flex flex-col mb-2 border border-camelot rounded-lg hover:shadow-sm hover:shadow-camelot-300",4,"ngFor","ngForOf"],["class","mx-4 flex bg-red-700 text-red text-xl rounded-lg font-bold items-center justify-center py-2 text-center",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"p-3","text-base","text-black-100","tracking-wide","text-left"],[1,"flex","flex-col"],[1,"p-3","text-sm","text-black-100","tracking-wide","text-center"],[1,"bg-red-500","hover:bg-red-700","text-white","font-bold","py-2","px-4","rounded-full",3,"click"],[1,"fas","fa-trash-alt"],[1,"w-full","h-full","flex","flex-col","mb-2","border","border-camelot","rounded-lg","hover:shadow-sm","hover:shadow-camelot-300"],[1,"w-full","grid","grid-cols-1","break-all","items-center","space-x-2","text-center","text-camelot","text-lg","px-2","font-bold","underline"],[1,"w-full","grid","grid-cols-5","break-all","items-left","space-x-2","text","pl-2","py-2","pr-2"],[1,"col-span-2","break-all","font-bold","text-camelot"],[1,"col-span-3","break-all","text-nile-blue"],[1,"flex","flex-row","gap-2","justify-end","my-2"],[1,"border-2","border-camelot","text-sm","text-nile-blue","bg-cameo","rounded-lg","px-2","py-1","mr-2",3,"click"],[1,"mx-4","flex","bg-red-700","text-red","text-xl","rounded-lg","font-bold","items-center","justify-center","py-2","text-center"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0),e.YNc(1,A,10,0,"div",1),e.YNc(2,q,27,7,"div",2),e.qZA()),2&t&&(e.xp6(1),e.Q6J("ngIf",o.loading),e.xp6(1),e.Q6J("ngIf",!o.loading))},dependencies:[a.sg,a.O5,c.Fj,c.JJ,c.On,a.uU,f.u],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;width:100%;height:100%;align-items:center;justify-content:center}.fast-spin[_ngcontent-%COMP%]{animation-duration:.4s}"]}),n})(),canActivate:[i(7574).a],data:{requiredRole:"DECE"},title:"Casos"}];let F=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[h.Bz.forChild(E),h.Bz]}),n})();var j=i(4466);let M=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[a.ez,F,c.u5,j.m]}),n})()}}]);